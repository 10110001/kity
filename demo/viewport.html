<!DOCTYPE html>
<html>
<head>
    <title>Graffle</title>
    <script src="../dev-lib/sea.js"></script>
    <script>

        seajs.config({
            base: '../src'
        });
        define('start', function (require) {
            var Class = require('core/class');
            var Draggable = require('../demo/public/draggable');
            var Paper = Class.extendClass( require('graphic/paper'), Draggable.prototype );
            var Shape = Class.extendClass( require('graphic/shape'), Draggable.prototype );
            var Path = require('graphic/path');
            var Grid = require('../demo/public/grid');

            var Rect = require('graphic/rect');

            var paper = new Paper(document.body);
            paper.setViewBox(-50, -50, 100, 100).drag();

            paper.addShape(new Grid(-1000, -1000, 2000, 2000, 10));
            paper.addShape(new Rect(15, 15, 30, 30).fill('red').scale(0.5).drag());
            paper.addShape(new Path().pipe(function() {
                var d = this.getDrawer();
                d.moveTo(0, -10000).lineTo(0, 10000);
                d.moveTo(-10000, 0).lineTo(10000, 0);
                this.stroke('black', 1);
            }));

            window.addEventListener('mousewheel', function(e) {
                //console.log("wheel", e);
                e.preventDefault();
            });
            paper.on('click', function(e) {
                console.log("down", e.getPosition());
                e.preventDefault();
            });
            document.body.addEventListener('mousewheel', function(e) {
                var viewport = paper.getViewPort();
                if(e.wheelDelta > 0) {
                    viewport.zoom = viewport.zoom * 0.95;
                } else {
                    viewport.zoom = viewport.zoom / 0.95;
                }
                console.log(viewport);
                paper.setViewPort(viewport);
            });
        });
        seajs.use('start');
    </script>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
    </style>
</head>
<body>
</body>
</html>